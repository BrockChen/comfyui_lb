# ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—

æ­å–œï¼æ‚¨çš„ Dify ComfyUI æ’ä»¶å·²ç»å¼€å‘å®Œæˆã€‚ä»¥ä¸‹æ˜¯å‘å¸ƒå’Œä½¿ç”¨çš„è¯¦ç»†æ­¥éª¤ã€‚

## ğŸ“ å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

### 1. ä¸ªæ€§åŒ–é…ç½®

åœ¨å‘å¸ƒå‰ï¼Œè¯·æ›¿æ¢ä»¥ä¸‹å ä½ç¬¦ï¼š

#### åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æ›¿æ¢:
```bash
# æ›¿æ¢ GitHub ç”¨æˆ·å
find . -type f \( -name "*.md" -o -name "*.yaml" \) -exec sed -i '' 's/yourusername/YOUR_GITHUB_USERNAME/g' {} +
find . -type f \( -name "*.md" -o -name "*.yaml" \) -exec sed -i '' 's/Your Name/YOUR_ACTUAL_NAME/g' {} +
```

#### éœ€è¦æ›´æ–°çš„æ–‡ä»¶:
- [ ] `manifest.yaml` - author å­—æ®µ
- [ ] `provider/comfyui.yaml` - author å­—æ®µ
- [ ] `tools/generate_image.yaml` - author å­—æ®µ
- [ ] `README.md` - GitHub URLs
- [ ] `QUICKSTART.md` - GitHub URLs
- [ ] `SETUP_GUIDE.md` - GitHub URLs
- [ ] `PUBLISHING.md` - GitHub URLs
- [ ] `LICENSE` - Copyright holder

### 2. éªŒè¯æ’ä»¶

```bash
cd dify-plugin-comfyui

# è¿è¡ŒéªŒè¯è„šæœ¬
python3 validate.py

# æœŸæœ›è¾“å‡º:
# âœ… All validations passed!
```

### 3. æµ‹è¯•åŠŸèƒ½

#### æœ¬åœ°æµ‹è¯• (å¯é€‰):
```bash
# å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥ Dify è°ƒè¯•å‡­æ®

# è¿è¡Œæ’ä»¶
python3 -m main
```

## ğŸŒ å‘å¸ƒåˆ° GitHub

### Step 1: åˆ›å»º GitHub ä»“åº“

1. è®¿é—® https://github.com/new
2. ä»“åº“åç§°: `dify-plugin-comfyui`
3. æè¿°: `ComfyUI integration plugin for Dify - AI image generation through workflow API`
4. é€‰æ‹© **Public**
5. **ä¸è¦** åˆå§‹åŒ– README (æˆ‘ä»¬å·²ç»æœ‰äº†)
6. ç‚¹å‡» **Create repository**

### Step 2: æ¨é€ä»£ç 

```bash
cd dify-plugin-comfyui

# åˆå§‹åŒ– Git (å¦‚æœè¿˜æ²¡æœ‰)
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "feat: Initial release of ComfyUI plugin for Dify

- Support for ComfyUI workflow API integration
- Automatic image generation and download
- Load balancer support
- Comprehensive error handling
- Complete documentation"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/YOUR_USERNAME/dify-plugin-comfyui.git

# æ¨é€åˆ° GitHub
git branch -M main
git push -u origin main
```

### Step 3: åˆ›å»º Release

1. è®¿é—®ä½ çš„ä»“åº“é¡µé¢
2. ç‚¹å‡» **Releases** â†’ **Create a new release**
3. å¡«å†™ä¿¡æ¯:
   - **Tag**: `v0.0.1`
   - **Release title**: `v0.0.1 - Initial Release`
   - **Description**:
     ```markdown
     ## ğŸ‰ Initial Release
     
     ### Features
     - âœ¨ Generate images using ComfyUI workflow API
     - ğŸ”„ Support for ComfyUI load balancer
     - ğŸ“¦ Automatic image download and storage in Dify
     - âš¡ Async processing with progress tracking
     - ğŸ”Œ Easy integration with Dify workflows and agents
     
     ### Installation
     Install directly from GitHub in Dify's plugin marketplace:
     ```
     https://github.com/YOUR_USERNAME/dify-plugin-comfyui
     ```
     
     ### Documentation
     - [Quick Start Guide](QUICKSTART.md)
     - [Setup Guide](SETUP_GUIDE.md)
     - [Full Documentation](README.md)
     
     ### Requirements
     - Dify v0.6.0+
     - ComfyUI (latest stable)
     ```
4. ç‚¹å‡» **Publish release**

## ğŸ”Œ åœ¨ Dify ä¸­å®‰è£…

### Step 1: æ‰“å¼€ Dify æ’ä»¶ç®¡ç†

1. ç™»å½•ä½ çš„ Dify å®ä¾‹
2. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ **Settings**
3. å·¦ä¾§èœå•é€‰æ‹© **Plugins**

### Step 2: ä» GitHub å®‰è£…

1. ç‚¹å‡» **Install from GitHub** æŒ‰é’®
2. è¾“å…¥ä»“åº“ URL:
   ```
   https://github.com/YOUR_USERNAME/dify-plugin-comfyui
   ```
3. ç‚¹å‡» **Install**
4. ç­‰å¾…å®‰è£…å®Œæˆ (é€šå¸¸ 10-30 ç§’)

### Step 3: é…ç½®æ’ä»¶

1. åœ¨æ’ä»¶åˆ—è¡¨ä¸­æ‰¾åˆ° **ComfyUI**
2. ç‚¹å‡» **Settings** (é½¿è½®å›¾æ ‡)
3. å¡«å†™é…ç½®:
   - **ComfyUI Base URL**: 
     - æœ¬åœ°: `http://localhost:8188`
     - è¿œç¨‹: `http://your-server-ip:8188`
     - è´Ÿè½½å‡è¡¡å™¨: `http://your-lb-url:8100`
4. ç‚¹å‡» **Test Connection** éªŒè¯è¿æ¥
5. ç‚¹å‡» **Save**

## ğŸ§ª æµ‹è¯•æ’ä»¶

### æµ‹è¯• 1: åœ¨å·¥ä½œæµä¸­ä½¿ç”¨

1. åˆ›å»ºæ–°çš„ **Workflow**
2. æ·»åŠ  **Code** èŠ‚ç‚¹:
   ```python
   import json
   
   workflow = {
       "3": {
           "inputs": {
               "seed": 123456,
               "steps": 20,
               "cfg": 8.0,
               "sampler_name": "euler",
               "scheduler": "normal",
               "denoise": 1.0,
               "model": ["4", 0],
               "positive": ["6", 0],
               "negative": ["7", 0],
               "latent_image": ["5", 0]
           },
           "class_type": "KSampler"
       },
       # ... (ä½¿ç”¨ examples/basic_workflow.json ä¸­çš„å®Œæ•´å†…å®¹)
   }
   
   return {
       "result": json.dumps(workflow)
   }
   ```
3. æ·»åŠ  **Tool** èŠ‚ç‚¹:
   - é€‰æ‹© **ComfyUI** â†’ **Generate Image**
   - è¿æ¥ Code èŠ‚ç‚¹çš„ `result` åˆ° `workflow_api`
4. æ·»åŠ  **End** èŠ‚ç‚¹æ˜¾ç¤ºå›¾åƒ
5. ç‚¹å‡» **Run** æµ‹è¯•

### æµ‹è¯• 2: åœ¨ Agent ä¸­ä½¿ç”¨

1. åˆ›å»ºæ–°çš„ **Agent**
2. æ·»åŠ  **ComfyUI** å·¥å…·
3. æµ‹è¯•å¯¹è¯:
   ```
   User: å¸®æˆ‘ç”Ÿæˆä¸€å¼ å±±æ™¯å›¾ç‰‡
   Agent: (è°ƒç”¨ ComfyUI å·¥å…·ç”Ÿæˆå›¾ç‰‡)
   ```

## ğŸ“¤ æäº¤åˆ° Dify Marketplace (å¯é€‰)

å¦‚æœä½ æƒ³è®©æ›´å¤šäººä½¿ç”¨ä½ çš„æ’ä»¶:

### Step 1: Fork Dify Plugins ä»“åº“

```bash
# Fork https://github.com/langgenius/dify-plugins

# Clone ä½ çš„ fork
git clone https://github.com/YOUR_USERNAME/dify-plugins.git
cd dify-plugins
```

### Step 2: æ·»åŠ ä½ çš„æ’ä»¶

```bash
# åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b add-comfyui-plugin

# å¤åˆ¶æ’ä»¶æ–‡ä»¶
mkdir -p marketplace/comfyui
cp -r ../dify-plugin-comfyui/* marketplace/comfyui/

# æäº¤
git add marketplace/comfyui
git commit -m "feat: Add ComfyUI plugin"
git push origin add-comfyui-plugin
```

### Step 3: åˆ›å»º Pull Request

1. è®¿é—®ä½ çš„ fork: `https://github.com/YOUR_USERNAME/dify-plugins`
2. ç‚¹å‡» **Pull Request**
3. å¡«å†™ PR ä¿¡æ¯:
   - **Title**: `Add ComfyUI Plugin`
   - **Description**: è¯¦ç»†è¯´æ˜æ’ä»¶åŠŸèƒ½
4. ç­‰å¾… Dify å›¢é˜Ÿå®¡æ ¸

## ğŸ“Š ç»´æŠ¤å’Œæ›´æ–°

### å‘å¸ƒæ–°ç‰ˆæœ¬

1. ä¿®æ”¹ä»£ç 
2. æ›´æ–°ç‰ˆæœ¬å·:
   - `manifest.yaml`: `version: 0.0.2`
   - `__init__.py`: `__version__ = "0.0.2"`
   - `CHANGELOG.md`: æ·»åŠ æ›´æ–°æ—¥å¿—
3. æäº¤å¹¶æ¨é€
4. åˆ›å»ºæ–°çš„ GitHub Release (tag: `v0.0.2`)
5. Dify ç”¨æˆ·ä¼šè‡ªåŠ¨æ”¶åˆ°æ›´æ–°é€šçŸ¥

### å¤„ç† Issues

1. ç›‘æ§ GitHub Issues
2. åŠæ—¶å›å¤ç”¨æˆ·é—®é¢˜
3. ä¿®å¤ bug å¹¶å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬
4. æ”¶é›†åŠŸèƒ½å»ºè®®

## ğŸ“š æ¨å¹¿ä½ çš„æ’ä»¶

### 1. ç¤¾äº¤åª’ä½“

- Twitter/X: åˆ†äº«æ’ä»¶é“¾æ¥
- Reddit: r/LocalLLaMA, r/StableDiffusion
- Discord: Dify å’Œ ComfyUI ç¤¾åŒº

### 2. åšå®¢æ–‡ç« 

å†™ä¸€ç¯‡æ•™ç¨‹:
- ä¸ºä»€ä¹ˆå¼€å‘è¿™ä¸ªæ’ä»¶
- å¦‚ä½•ä½¿ç”¨
- å®é™…æ¡ˆä¾‹å±•ç¤º

### 3. è§†é¢‘æ¼”ç¤º

å½•åˆ¶ä½¿ç”¨è§†é¢‘:
- å®‰è£…è¿‡ç¨‹
- é…ç½®æ­¥éª¤
- å®é™…ä½¿ç”¨æ¡ˆä¾‹

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®è®¤:

- [ ] æ‰€æœ‰å ä½ç¬¦å·²æ›¿æ¢
- [ ] éªŒè¯è„šæœ¬é€šè¿‡
- [ ] GitHub ä»“åº“åˆ›å»º
- [ ] ä»£ç å·²æ¨é€
- [ ] Release å·²åˆ›å»º
- [ ] åœ¨ Dify ä¸­æµ‹è¯•å®‰è£…
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£é“¾æ¥æ­£ç¡®
- [ ] LICENSE æ–‡ä»¶æ­£ç¡®

## ğŸ‰ æ­å–œï¼

ä½ å·²ç»æˆåŠŸåˆ›å»ºå¹¶å‘å¸ƒäº†ä¸€ä¸ª Dify æ’ä»¶ï¼

### ä¸‹ä¸€æ­¥:

1. â­ ç»™ä½ çš„ä»“åº“åŠ æ˜Ÿ
2. ğŸ“¢ åˆ†äº«ç»™ç¤¾åŒº
3. ğŸ› ç›‘æ§å’Œä¿®å¤ issues
4. ğŸš€ æ·»åŠ æ–°åŠŸèƒ½
5. ğŸ“ æŒç»­æ”¹è¿›æ–‡æ¡£

---

**éœ€è¦å¸®åŠ©?**

- ğŸ“– æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: [README.md](README.md)
- ğŸ”§ æ•…éšœæ’é™¤: [SETUP_GUIDE.md](SETUP_GUIDE.md)
- ğŸ’¬ æé—®: [GitHub Discussions](https://github.com/YOUR_USERNAME/dify-plugin-comfyui/discussions)

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ¨âœ¨
